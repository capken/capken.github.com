<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>整形美容意外险</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/swiper.min.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="css/main.css" rel="stylesheet">
    <style>
        @media print {
            #ghostery-purple-box {
                display: none !important
            }
        }


        .swiper-container {
            width: 100%;
            padding-top: 0;
            padding-bottom: 50px;
        }

        .swiper-slide {
            background-position: center;
            background-size: cover;
            width: 345px;
            height: 400px;
        }
    </style>
</head>

<body>
    <form class="form-signin">

        <div class="swiper-container">
            <div class="swiper-wrapper">
                <div class="swiper-slide" style="background-image:url(img/beauty.jpg)"></div>
            </div>
            <!-- Add Pagination -->
            <div class="swiper-pagination"></div>
        </div>

        <div class="form-label-group">
            <input type="tel" pattern="[0-9]*" id="mobile" class="form-control" placeholder="请输入手机号码" required="" autofocus="" data-com.agilebits.onepassword.user-edited="yes">
            <label for="mobile">请输入手机号码</label>
        </div>


        <div class="form-group">
            <button class="btn btn-lg btn-primary btn-block" type="button" onclick="generateQRCode()">生成二维码</button>
        </div>

        <div class="main-mask-claim" onclick="generateQRCode()">
            <div id="qrCode" class="main-pop" style="width: 230px;height: 230px;z-index: 110;padding: 5px">
            </div>
        </div>
    </form>


    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/popper.js"></script>
    <script type="text/javascript" src="js/bootstrap.js"></script>
    <script type="text/javascript" src="js/qrcode.js"></script>
    <script type="text/javascript" src="js/bootbox.min.js"></script>
    <script type="text/javascript" src="js/swiper.min.js"></script>
    <script>

        var data = [
            {
                "title": "美容意外险",
                "url": "https://emcs.pa18.com/product/g_tuanyi/index.html?appType=01&key=11805290000000133554",
                "img": "https://emcs.pa18.com/resource/HP0500155900002/01_39001555120634.jpg",
                "description": ""
            }
        ];


        var qrcode = new QRCode(document.getElementById("qrCode"), {
            width: 220,
            height: 220,
            text: "http://jindo.dev.naver.com/collie",
            colorDark: "#000000",
            colorLight: "#ffffff",
            correctLevel: QRCode.CorrectLevel.H
        });

        var swiper = new Swiper('.swiper-container', {
            effect: 'coverflow',
            grabCursor: true,
            centeredSlides: true,
            slidesPerView: 'auto',
            coverflowEffect: {
                rotate: 50,
                stretch: 0,
                depth: 100,
                modifier: 1,
                slideShadows: true,
            },
            pagination: {
                el: '.swiper-pagination',
            },
            on: {
                slideChangeTransitionEnd: function () {
                    $(".card-body .card-title").text(data[this.activeIndex].title);
                    $(".card-body .card-text").text(data[this.activeIndex].description);
                }
            }
        });


        function generateQRCode() {
            var blockDiv = $(".main-mask-claim");
            if (blockDiv.is(":hidden")) {
                if (!$("#mobile").val()) {
                    return bootbox.alert({
                        message: "请输入手机号码",
                        buttons:{
                            ok: {
                                label: '关闭'
                            }
                        }
                    });
                }

                var mobileReg = /^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/;
                if(!$("#mobile").val().match(mobileReg)){
                    return bootbox.alert({
                        message: "手机号不符合规范，请检查",
                        buttons:{
                            ok: {
                                label: '关闭'
                            }
                        }
                    });
                }

                bootbox.confirm({
                    size: "small",
                    message: "确认手机号填写正确吗？",
                    buttons: {
                        confirm: {
                            label: '确认',
                        },
                        cancel: {
                            label: '取消',
                        }
                    },
                    callback: function (result) {
                        /* result is a boolean; true = OK, false = Cancel*/
                        if (result) {

                            var url = window.location.href.replace("index.html", "product.html");
                            if (url.indexOf("?") == -1) {
                                url += "?mobile=" + $("#mobile").val();
                            } else {
                                url += "&mobile=" + $("#mobile").val();
                            }
                            qrcode.clear(); // clear the code.
                            qrcode.makeCode(url);
                            blockDiv.show();
                        }
                    }
                })
            } else {
                blockDiv.hide();
            }

        }



    </script>
</body>

</html>
